(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(21)},21:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(9),l=a.n(r),c=a(2),i=(a(7),a(10)),s=a(11),m=a(13),d=a(12),u=a(14),p=function(){var e=new Date,t={hours:e.getHours(),minutes:e.getMinutes()},a={yersterday:new Date(e),twoDaysAgo:new Date(e),threeDaysAgo:new Date(e)},n=1;for(var o in a)a[o].setDate(a[o].getDate()-n),n++;return[e,t,a,function(e){switch(e){case 1:e="January";break;case 2:e="February";break;case 3:e="March";break;case 4:e="April";break;case 5:e="May";break;case 6:e="June";break;case 7:e="July";break;case 8:e="August";break;case 9:e="September";break;case 10:e="October";break;case 11:e="November";break;case 12:e="Decemeber";break;default:e="Undefined"}return e}]},E=a(4),h=p()[0].toString().split(" ");var g=function(e){var t=e.location;return o.a.createElement("header",null,o.a.createElement("section",{id:"header-container"},"/"===t?o.a.createElement("div",null,o.a.createElement("h4",null,h[0]+", "+h[1]+" "+h[3]),o.a.createElement("h3",null,"Hello ",e.username)):o.a.createElement("div",{id:"goBackHeader"},o.a.createElement(E.b,{to:"/"},o.a.createElement("img",{src:"/media/goBack.svg",alt:"goBack"})),o.a.createElement(E.b,{to:"/"},o.a.createElement("span",null,"Go back"))),o.a.createElement("a",{onClick:function(){fetch("/logoutUser",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e),window.location="/"})},id:"test"===t?"headerLogoutMain":"headerLogoutSecondary"},"Log out")))},f=a(5),v=a(6),b=p(),y=b[3],w=function(e){var t=e.mood,a=Object(n.useState)({0:{date:b[2].threeDaysAgo,mood:""},1:{date:b[2].twoDaysAgo,mood:""},2:{date:b[2].yersterday,mood:""}}),r=Object(c.a)(a,2),l=r[0],i=r[1];Object(n.useEffect)(function(){fetch("/usersFeeling",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){for(var t=function(t){for(var a=function(a){var n=l[t].date.toLocaleDateString("en-CA").split("T");e[a].mood_date.split("T")[0]===n[0]&&i(function(n){return Object(v.a)({},n,Object(f.a)({},t,Object(v.a)({},n[t],{mood:e[a].mood_descr})))})},n=0;n<e.length;n++)a(n)},a=0;a<Object.keys(l).length;a++)t(a)})},[]);var s=function(e){return e=y(e.getMonth()+1)+" "+e.getDate()};return o.a.createElement("section",{id:"mood-days"},o.a.createElement("div",{className:"days-div"},s(l[0].date),o.a.createElement("br",null),o.a.createElement("p",null,l[0].mood?l[0].mood:"No entry")),o.a.createElement("div",{className:"days-div"},s(l[1].date),o.a.createElement("br",null),o.a.createElement("p",null,l[1].mood?l[1].mood:"No entry")),o.a.createElement("div",{className:"days-div"},s(l[2].date),o.a.createElement("br",null),o.a.createElement("p",null,l[2].mood?l[2].mood:"No entry")),o.a.createElement("div",{className:"days-div"},"Today",o.a.createElement("br",null),o.a.createElement("p",null,t||"No entry")))};var j=function(){var e=Object(n.useState)({latitude:"",longitude:""}),t=Object(c.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(new Date),i=Object(c.a)(l,2),s=i[0],m=i[1],d=Object(n.useState)({location:"Not selected",temperature:"20",description:"none"}),u=Object(c.a)(d,2),p=u[0],E=u[1];function h(e){var t=e.coords,a=t.latitude,n=t.longitude;r(function(e){return{latitude:a,longitude:n}})}return Object(n.useEffect)(function(){setInterval(function(){m(new Date)},1e4),navigator.geolocation.getCurrentPosition(h)},[]),Object(n.useEffect)(function(){var e,t;""!==a.latitude&&(e=a.latitude,t=a.longitude,fetch("/APIkey").then(function(e){return e.json()}).then(function(a){var n=a.WeatherAPI,o="https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(n);console.log(o),fetch(o).then(function(e){return e.json()}).then(function(e){var t=e.name,a=(e.main.temp-273.15).toFixed(0),n=e.weather[0].description;E(function(e){return{location:t,temperature:a,description:n}})})}))},[a]),o.a.createElement("div",{className:"weather_container"},o.a.createElement("p",{id:"Location"},p.location),o.a.createElement("p",{id:"temperature"},p.temperature,"\xb0"),o.a.createElement("p",{id:"time"},s.getHours()+":"+s.getMinutes()),o.a.createElement("p",{id:"weather-decrs"},p.description))},O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={mood:"",symptoms:"",date:new Date,username:e.username,userId:e.userId},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/usersFeeling",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(t){var a=t[t.length-1].mood_date.split("T"),n=e.state.date.toLocaleDateString("en-CA").split("T");a[0]===n[0]&&e.setState({mood:t[t.length-1].mood_descr,symptoms:t[t.length-1].symptoms})})}},{key:"render",value:function(){return o.a.createElement("div",{id:"moodContainer"},o.a.createElement("div",{id:"Grid-holder-mood"},o.a.createElement(g,{username:this.state.username,location:"/"}),o.a.createElement("section",{id:"weatherSection"},o.a.createElement("h3",null,"Today\u2019s weather"),o.a.createElement(j,null)),o.a.createElement("section",{id:"checkinSection"},o.a.createElement("h3",null,"These are your last check-ins"),o.a.createElement(w,{mood:this.state.mood})),o.a.createElement("section",{id:"moodEdit",className:this.state.mood?"MoodEditOn":"MoodEditOff"},this.state.mood?o.a.createElement("div",{id:"current-mood-container"},o.a.createElement("h3",null,"Today I feel: "),o.a.createElement("div",null,o.a.createElement("h2",null,this.state.mood),o.a.createElement("p",null,"Notes: ",this.state.symptoms),o.a.createElement("img",{src:"/media/"+this.state.mood+".svg",alt:this.state.mood+"mood"}))):o.a.createElement("h2",null,"No entries for today")),o.a.createElement("section",{id:this.state.mood?"MoodOn":"ChangeMoodSection"},o.a.createElement("div",null,o.a.createElement(E.b,{to:"/addMood"},"+"),o.a.createElement("h4",null,this.state.mood?"Edit Mood":"Add mood")))),o.a.createElement("a",{href:"https://www.freepik.com/vectors/like-emoji",className:"pic-contribution"},"Like emoji vector created by rawpixel.com - www.freepik.com"))}}]),t}(o.a.Component),k=a(0);var S=function(){var e=Object(n.useState)({username:"",password:""}),t=Object(c.a)(e,2),a=t[0],r=t[1],l=function(e){var t=e.target,n=t.name,o=t.value;r(function(e){return Object(v.a)({},e,Object(f.a)({},n,o))},a.password=btoa(a.password))},i=a.username,s=a.password,m=Object(n.useState)(!1),d=Object(c.a)(m,2),u=d[0],p=d[1],h=function(){fetch("/signUpUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){"Registration is successful"===e.message&&p(!0)})};return o.a.createElement("div",{className:"sign-up-container"},o.a.createElement("div",{className:u?"notification":"notificationHidden"},o.a.createElement("p",null,"Thank you for registration, ",i),o.a.createElement("a",{onClick:function(){p(!1),r({username:"",password:""}),window.location.href="/login"}},"Close")),o.a.createElement("div",{className:"loginScreenHeader"},o.a.createElement("h1",null,"Moodnex"),o.a.createElement("h5",null,"Your personal mood app"),o.a.createElement("h3",null,"Sign Up")),o.a.createElement("form",{method:"POST",action:"/",onSubmit:function(e){e.preventDefault(),console.log(),null!=i&&null!=s&&h()}},o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",id:"username",name:"username",value:i,onChange:l,placeholder:"Username..",required:!0}),o.a.createElement("label",{htmlFor:"passwordR"},"Password"),o.a.createElement("input",{type:"password",id:"passwordR",name:"password",value:s,onChange:l,placeholder:"Enter Your Password",required:!0}),o.a.createElement("input",{type:"submit",id:"subBtn",value:"Sign Up"}),o.a.createElement("p",null,"Already have an account? ",o.a.createElement(E.b,{to:"/login"},"Log In!"))))};var N=function(){var e=Object(n.useState)({username:"",password:""}),t=Object(c.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),i=Object(c.a)(l,2),s=i[0],m=i[1],d=function(e){var t=e.target,a=t.name,n=t.value;r(function(e){return Object(v.a)({},e,Object(f.a)({},a,n))})},u=a.username,p=a.password,h=function(){fetch("/loginUser",{method:"POST",headers:{"Content-Type":"application/json"},credential:!0,body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){console.log(e),e.message?"Wrong password"===e.message?m("Wrong password!"):"No user found"===e.message?m("Wrong username!"):alert("Wrong credentials. Try again"):window.location.reload()})};return o.a.createElement("div",{className:"sign-up-container"},o.a.createElement("div",{className:"loginScreenHeader"},o.a.createElement("h1",null,"Moodnex"),o.a.createElement("h5",null,"Your personal mood app"),o.a.createElement("h3",null,"Login")),o.a.createElement("form",{method:"POST",action:"/",onSubmit:function(e){e.preventDefault(),console.log(),null!=u&&null!=p&&h()}},o.a.createElement("p",{className:s?"loginError-active":"loginError-none"},s),o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",id:"username",name:"username",autoComplete:"on",value:u,onChange:d,placeholder:"Type here..",required:!0}),o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",id:"password",name:"password",autoComplete:"on",value:p,onChange:d,placeholder:"Type here..",required:!0}),o.a.createElement("input",{type:"submit",id:"subBtn",value:"Login"}),o.a.createElement("p",null,"Don't have an account? ",o.a.createElement(E.b,{to:"/signup"},"Sign Up!"))))},C=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(""),s=Object(c.a)(i,2),m=s[0],d=s[1],u=Object(n.useState)(!1),p=Object(c.a)(u,2),E=p[0],h=p[1],f={userId:e.userId,mood:r,symptoms:m};function v(e){l(r=e.currentTarget.id)}var b="Happy",y="Joyful",w="Peaceful",j="Loving",O="Stressed",k="Sad",S="Angry",N="Frustrated",C="Grumpy";return o.a.createElement("div",{id:"addModd-container"},o.a.createElement("div",{id:"addModd-mood-inner-container"},o.a.createElement(g,{location:"addMood"}),o.a.createElement("section",{id:"confirmation"},E?o.a.createElement("div",{id:"Mood-update-note"},o.a.createElement("h4",null,"A new entry was added")):o.a.createElement("div",null)),o.a.createElement("section",{id:"moodHolder"},o.a.createElement("h3",null,"Today I feel: "),o.a.createElement("div",{onClick:v,id:b},o.a.createElement("img",{src:"media/happy.svg",alt:"happy",className:r===b?"mood-selected":"mood-img"}),o.a.createElement("h4",null,b)),o.a.createElement("div",{onClick:v,id:y},o.a.createElement("img",{src:"media/joyful.svg",alt:"Joyful",className:r===y?"mood-selected":"mood-img"}),o.a.createElement("h4",null,y)),o.a.createElement("div",{onClick:v,id:w},o.a.createElement("img",{src:"media/Peaceful.svg",alt:"Peaceful",className:r===w?"mood-selected":"mood-img"}),o.a.createElement("h4",null,w)),o.a.createElement("div",{onClick:v,id:j},o.a.createElement("img",{src:"media/loving.svg",alt:"Loving",className:r===j?"mood-selected":"mood-img"}),o.a.createElement("h4",null,j)),o.a.createElement("div",{onClick:v,id:O},o.a.createElement("img",{src:"media/stressed.svg",alt:"stressed",className:r===O?"mood-selected":"mood-img"}),o.a.createElement("h4",null,O)),o.a.createElement("div",{onClick:v,id:k},o.a.createElement("img",{src:"media/upset.svg",alt:"upset",className:r===k?"mood-selected":"mood-img"}),o.a.createElement("h4",null,k)),o.a.createElement("div",{onClick:v,id:S},o.a.createElement("img",{src:"media/angry.svg",alt:"angry",className:r===S?"mood-selected":"mood-img"}),o.a.createElement("h4",null,S)),o.a.createElement("div",{onClick:v,id:N},o.a.createElement("img",{src:"media/frustrated.svg",alt:"frustrated",className:r===N?"mood-selected":"mood-img"}),o.a.createElement("h4",null,N)),o.a.createElement("div",{onClick:v,id:C},o.a.createElement("img",{src:"media/grumpy.svg",alt:"grumpy",className:r===C?"mood-selected":"mood-img"}),o.a.createElement("h4",null,C))),o.a.createElement("section",{id:"symptoms"},o.a.createElement("h3",null,"Is there anything else you want to mention?"),o.a.createElement("textarea",{placeholder:"Type here..",onChange:function(e){d(m=e.target.value)}})),o.a.createElement("button",{onClick:function(){fetch("/addTodaysMood",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then(function(e){console.log(e)}),window.scrollTo(0,0),h(!0),setTimeout(function(){h(E=!1)},3e3)}},"Confirm")),o.a.createElement("a",{href:"https://www.freepik.com/vectors/like-emoji",className:"pic-contribution"},"Like emoji vector created by rawpixel.com - www.freepik.com"))};var T=function(){var e=Object(n.useState)({loginStatus:!1,username:"",userId:0}),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){fetch("/loginUser",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.loggedIn&&r({loginStatus:e.loggedIn,username:e.user,userId:e.userId})})},[]),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(k.d,null,o.a.createElement(k.b,{path:"/",element:a.loginStatus?o.a.createElement(O,{username:a.username,userId:a.userId}):o.a.createElement(k.a,{to:"/login",replace:!0})}),o.a.createElement(k.b,{path:"/addMood",element:a.loginStatus?o.a.createElement(C,{userId:a.userId}):o.a.createElement(k.a,{to:"/login",replace:!0})}),o.a.createElement(k.b,{path:"/login",element:a.loginStatus?o.a.createElement(k.a,{to:"/",replace:!0}):o.a.createElement(N,null)}),o.a.createElement(k.b,{path:"/signup",element:o.a.createElement(S,null)}))))},D=document.getElementById("root");l.a.render(o.a.createElement(T,null),D)},7:function(e,t,a){}},[[15,2,1]]]);
//# sourceMappingURL=main.072650fc.chunk.js.map